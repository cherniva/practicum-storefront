spring.application.name=storefront

# Allow bean definition overriding to resolve security configuration conflicts
spring.main.allow-bean-definition-overriding=true

spring.r2dbc.url=r2dbc:mysql://localhost:3306/storefront
spring.r2dbc.username=root
spring.r2dbc.password=rootroot

spring.sql.init.mode=always

# Multipart configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Logging configuration
logging.level.org.springframework.web=DEBUG
logging.level.com.cherniva.storefront=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Thymeleaf configuration
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false

#Redis configuration
spring.data.redis.host=127.0.0.1
spring.data.redis.port=6379
redis.template.ttl=1

#Keycloak configuration
spring.security.oauth2.client.provider.keycloak.authorization-uri=http://localhost:8082/realms/master/protocol/openid-connect/auth
spring.security.oauth2.client.provider.keycloak.token-uri=http://localhost:8082/realms/master/protocol/openid-connect/token
spring.security.oauth2.client.provider.keycloak.user-info-uri=http://localhost:8082/realms/master/protocol/openid-connect/userinfo
spring.security.oauth2.client.provider.keycloak.user-name-attribute=sub
spring.security.oauth2.client.provider.keycloak.jwk-set-uri=http://localhost:8082/realms/master/protocol/openid-connect/certs

spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.keycloak.provider=keycloak
spring.security.oauth2.client.registration.keycloak.client-id=test
spring.security.oauth2.client.registration.keycloak.client-secret=s8NcHgjmkk2devRpox9E3S683uNhUyw8
spring.security.oauth2.client.registration.keycloak.redirect-uri={baseUrl}/{action}/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email

# Payment service client credentials configuration
spring.security.oauth2.client.registration.keycloak.provider.issuer-uri=http://localhost:8082/realms/master
spring.security.oauth2.client.registration.payment-service.provider=keycloak
spring.security.oauth2.client.registration.payment-service.authorization-grant-type=client_credentials
spring.security.oauth2.client.registration.payment-service.client-id=payment-test
spring.security.oauth2.client.registration.payment-service.client-secret=iiqfdvL2xCkJrSERqDJGeszRs1zhCvho
spring.security.oauth2.client.registration.payment-service.scope=profile
spring.security.oauth2.client.registration.payment-service.clientAuthenticationMethod=client_secret_post